<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Talent Nomad ‚Äî –ü—Ä–æ—Ç–æ—Ç–∏–ø v2 (Seeker/Employer/University)</title>
<meta name="theme-color" content="#0a2b72" />
<style>
  :root{
    --bg: #07090f; --fg:#e6e6e6; --muted:#a2adbd; --card:#0b0f1a; --border:#1b2432;
    --accent:#0a2b72; --accent-2:#133a92; --glass: rgba(255,255,255,.04);
    --radius:16px; --shadow: 0 8px 30px rgba(0,0,0,.35);
  }
  .theme-bw{
    --bg:#ffffff; --fg:#111111; --muted:#60646b; --card:#f5f6f7; --border:#e6e7eb;
    --accent:#111111; --accent-2:#222222; --glass: rgba(0,0,0,.04);
    --shadow: 0 10px 28px rgba(17,17,17,.12);
  }
  *{box-sizing:border-box}
  html,body{margin:0;height:100%}
  body{
    background:
      radial-gradient(1200px 700px at 10% -10%, rgba(19,58,146,.25), transparent 60%),
      radial-gradient(1000px 600px at 90% -20%, rgba(10,43,114,.22), transparent 65%),
      var(--bg);
    color:var(--fg);
    font:14px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
    overflow-x:hidden;
  }
  .hidden{display:none} /* FIX: class used for view switching */
  .shell{max-width:1200px;margin:0 auto;padding:0 16px}
  /* Header */
  header{position:sticky;top:0;z-index:60;background:color-mix(in oklab, var(--bg), transparent 25%);
         border-bottom:1px solid var(--border); backdrop-filter:blur(8px)}
  .bar{display:flex;align-items:center;gap:14px;padding:12px 0}
  .brand-dot{width:34px;height:34px;border-radius:14px;background:linear-gradient(135deg,var(--accent),var(--accent-2));
             box-shadow:0 0 0 2px rgba(255,255,255,.04) inset}
  .brand{font-weight:900;letter-spacing:.3px;font-size:18px}
  .spacer{flex:1 1 auto}
  .btn{appearance:none;border:1px solid var(--border);background:transparent;color:var(--fg);
       padding:10px 14px;border-radius:12px;cursor:pointer;transition:.2s ease;box-shadow:none}
  .btn:hover{border-color:color-mix(in oklab,var(--accent),var(--border) 55%); transform: translateY(-1px);}
  .btn:active{transform: translateY(0)}
  .btn.primary{background:linear-gradient(135deg,var(--accent),var(--accent-2));color:white;border-color:var(--accent)}
  .btn.ghost{border-color:transparent}
  .badge{display:inline-flex;align-items:center;gap:6px;border:1px solid var(--border);
         border-radius:999px;padding:4px 8px;font-size:12px;color:var(--muted)}
  /* Layout */
  .grid{display:grid;gap:16px}
  .grid-2{grid-template-columns:repeat(2,minmax(0,1fr))}
  .grid-3{grid-template-columns:repeat(3,minmax(0,1fr))}
  .grid-4{grid-template-columns:repeat(4,minmax(0,1fr))}
  @media (max-width:1024px){.grid-3,.grid-4{grid-template-columns:1fr}.grid-2{grid-template-columns:1fr}}
  /* Cards */
  .card{background:linear-gradient(180deg, var(--glass), transparent 30%), var(--card);
        border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow); overflow:hidden;
        transform: translateY(0); transition: transform .25s ease, box-shadow .25s ease}
  .card:hover{ transform: translateY(-3px); box-shadow: 0 14px 30px rgba(0,0,0,.35)}
  .card .title{font-weight:800;padding:16px 16px 0 16px}
  .card .content{padding:16px}
  .muted{color:var(--muted)}
  .list{margin:0;padding-left:18px}
  .chips{display:flex;flex-wrap:wrap;gap:8px}
  .chip{background:color-mix(in oklab, var(--fg), transparent 92%);border:1px solid var(--border);
        padding:6px 10px;border-radius:999px;font-size:12px}
  .tag{font-size:12px;padding:3px 7px;border-radius:999px;border:1px solid var(--border);color:var(--muted)}
  .table{width:100%;border-collapse:collapse}
  .table th,.table td{text-align:left;border-bottom:1px solid var(--border);padding:10px 8px}
  .hr{height:1px;background:var(--border);margin:10px 0}
  /* Hero */
  .hero{position:relative;border:1px solid var(--border);border-radius:var(--radius);overflow:hidden}
  .hero .wrap{padding:28px 18px;background:linear-gradient(180deg, rgba(255,255,255,.02), transparent 40%), radial-gradient(900px 600px at 90% -20%, rgba(19,58,146,.24), transparent 60%)}
  .hero h1{margin:0;font-size:26px;line-height:1.15;letter-spacing:.2px}
  .hero p{margin:8px 0 0 0;color:var(--muted)}
  .hero .cta{display:flex;gap:10px;margin-top:16px;flex-wrap:wrap}
  /* Tabs */
  .tabs{display:flex;gap:8px;flex-wrap:wrap}
  .tab{padding:9px 12px;border:1px solid var(--border);border-radius:10px;cursor:pointer;transition:.2s ease}
  .tab.active{background:color-mix(in oklab,var(--accent),transparent 86%);border-color:var(--accent)}
  /* Modal */
  .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.55);display:none;align-items:center;justify-content:center;z-index:70}
  .modal{width:min(780px,92vw);background:var(--card);border:1px solid var(--border);border-radius:18px;overflow:hidden;box-shadow:var(--shadow); animation: pop .2s ease}
  .modal .hd{padding:16px;border-bottom:1px solid var(--border);font-weight:800}
  .modal .bd{padding:16px}
  .modal .ft{padding:12px 16px;border-top:1px solid var(--border);display:flex;gap:8px;justify-content:flex-end}
  .show{display:flex!important}
  /* Toast */
  .toast{position:fixed;bottom:16px;left:50%;transform:translateX(-50%);background:var(--card);border:1px solid var(--border);
         border-radius:12px;padding:10px 14px;display:none;z-index:80}
  /* Animations */
  @keyframes pop{ from{ transform:scale(.96); opacity:.0 } to{ transform:scale(1); opacity:1 } }
  .fade-in{ animation: fade .4s ease both }
  @keyframes fade{ from{ opacity:0; transform: translateY(6px) } to{ opacity:1; transform:none } }
</style>
</head>
<body>
  <header>
    <div class="shell bar">
      <div class="brand-dot" id="brandDot" aria-hidden="true"></div>
      <div class="brand">Talent Nomad <span class="badge">MVP</span></div>
      <div class="spacer"></div>
      <button class="btn ghost" id="tourBtn">üé¨ –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è</button>
      <button class="btn ghost" id="themeBtn">üé® –¢–µ–º–∞</button>
      <button class="btn ghost" id="brandingBtn">‚öôÔ∏è –ë—Ä–µ–Ω–¥</button>
      <span class="badge">üåê RU/KZ</span>
      <div style="width:8px"></div>
      <button class="btn" id="logoutBtn">‚Ü©Ô∏é –í—ã–π—Ç–∏</button>
    </div>
  </header>

  <main class="shell" style="padding:16px 16px 0 16px">
    <!-- LANDING -->
    <section id="landing" class="fade-in">
      <div class="hero">
        <div class="wrap">
          <h1>–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –≤—Ö–æ–¥–∞ –º–æ–ª–æ–¥—ã—Ö —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤ –Ω–∞ —Ä—ã–Ω–æ–∫ ‚Äî –∑–∞–¥–∞—á–∏, —á–∞—Å—ã, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω–æ–µ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ</h1>
          <p>–ö–∞–∑–∞—Ö—Å—Ç–∞–Ω ‚Üí –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –ê–∑–∏—è ‚Üí –º–∏—Ä. –≠—Å–∫—Ä–æ—É, —ç—Ç–∞–ø–Ω–∞—è –ø—Ä–∏—ë–º–∫–∞, —Ä–µ–π—Ç–∏–Ω–≥–∏ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–æ–≤ –∏ —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª–µ–π, –ø—É–ª—ã —Ç–∞–ª–∞–Ω—Ç–æ–≤.</p>
          <div class="cta">
            <button class="btn primary" id="enterSeeker">üë§ –í–æ–π—Ç–∏ –∫–∞–∫ —Å–æ–∏—Å–∫–∞—Ç–µ–ª—å</button>
            <button class="btn" id="enterEmployer">üíº –í–æ–π—Ç–∏ –∫–∞–∫ —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—å</button>
            <button class="btn" id="enterUniversity">üéì –í–æ–π—Ç–∏ –∫–∞–∫ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç</button>
          </div>
        </div>
      </div>

      <div class="grid grid-3" style="margin-top:16px">
        <div class="card">
          <div class="title">üéì –¢–æ–ø —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–æ–≤</div>
          <div class="content"><table class="table" id="uniTableSmall"></table></div>
        </div>
        <div class="card">
          <div class="title">üìà –ú–µ—Ç—Ä–∏–∫–∏ –≤–æ–≤–ª–µ—á–µ–Ω–∏—è</div>
          <div class="content">
            <div class="grid grid-2">
              <div>
                <div class="muted" style="margin-bottom:8px">–ß–∞—Å—ã, –∑–∞–∫—Ä—ã—Ç—ã–µ —Å–æ–∏—Å–∫–∞—Ç–µ–ª—è–º–∏</div>
                <div id="hoursChart" style="height:180px"></div>
              </div>
              <div>
                <div class="muted" style="margin-bottom:8px">–°—Ç–∞—Ç—É—Å—ã –∑–∞–¥–∞—á</div>
                <div id="statusChart" style="height:180px"></div>
              </div>
            </div>
          </div>
        </div>
        <div class="card">
          <div class="title">üè¢ –†–µ–π—Ç–∏–Ω–≥ —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª–µ–π</div>
          <div class="content"><table class="table" id="employerRatingSmall"></table></div>
        </div>
      </div>
    </section>

    <!-- SEEKER -->
    <section id="seeker" class="hidden fade-in">
      <div class="grid grid-2" style="align-items:center">
        <div class="grid" style="grid-template-columns:auto 1fr; gap:10px; align-items:center">
          <div class="badge" aria-hidden="true">ü™™</div>
          <div>
            <div style="font-weight:800">–ê–ª–∏—à–∞ –ê. ‚Äî Frontend (Junior)</div>
            <div class="muted" style="font-size:12px">–ê–ª–º–∞—Ç—ã ¬∑ RU/KZ ¬∑ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å 20 —á/–Ω–µ–¥</div>
          </div>
        </div>
        <div class="grid" style="grid-template-columns:repeat(3,1fr);gap:12px">
          <div class="card"><div class="content"><div class="muted">–ó–∞–≤–µ—Ä—à–µ–Ω–æ</div><div style="font-weight:900;font-size:20px">12</div></div></div>
          <div class="card"><div class="content"><div class="muted">–†–µ–π—Ç–∏–Ω–≥</div><div style="font-weight:900;font-size:20px">4.8 ‚≠ê</div></div></div>
          <div class="card"><div class="content"><div class="muted">–ß–∞—Å—ã (–º–µ—Å.)</div><div style="font-weight:900;font-size:20px">46</div></div></div>
        </div>
      </div>

      <div class="tabs" id="seekerTabs" style="margin-top:8px"></div>

      <div id="seeker_feed" class="tabpage">
        <div class="search-row" style="margin:10px 0 12px 0">
          <input type="text" placeholder="–ü–æ–∏—Å–∫ –∑–∞–¥–∞—á‚Ä¶" id="taskSearch"/>
          <select id="taskSkill">
            <option value="">–ù–∞–≤—ã–∫</option><option>Frontend</option><option>Data</option><option>QA</option><option>SMM</option><option>UI/UX</option>
          </select>
          <button class="btn" id="taskFilterBtn">üîé –§–∏–ª—å—Ç—Ä—ã</button>
        </div>
        <div id="tasksGrid" class="grid grid-2"></div>
      </div>

      <div id="seeker_contracts" class="tabpage hidden">
        <div class="card"><div class="title">–≠—Ç–∞–ø—ã –∏ —ç—Å–∫—Ä–æ—É</div>
          <div class="content">
            <table class="table"><thead><tr><th>–ó–∞–¥–∞—á–∞</th><th>–≠—Ç–∞–ø</th><th>–°—Ç–∞—Ç—É—Å</th><th>–û–ø–ª–∞—Ç–∞</th></tr></thead>
            <tbody><tr><td>–í–µ—Ä—Å—Ç–∫–∞ –ª–µ–Ω–¥–∏–Ω–≥–∞</td><td>UI (50%)</td><td><span class="tag">–ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ</span></td><td><span class="tag">–≤ —ç—Å–∫—Ä–æ—É</span></td></tr>
                   <tr><td>SMM –∫–æ–Ω—Ç–µ–Ω—Ç</td><td>–ö–∞–ª–µ–Ω–¥–∞—Ä—å</td><td><span class="tag">–í —Ä–∞–±–æ—Ç–µ</span></td><td>‚Äî</td></tr></tbody></table>
          </div></div>
      </div>

      <div id="seeker_portfolio" class="tabpage hidden">
        <div class="grid grid-3" id="portfolioGrid"></div>
      </div>

      <div id="seeker_universities" class="tabpage hidden">
        <div class="card"><div class="title">–£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç—ã ‚Äî –ø—É–ª—ã —Ç–∞–ª–∞–Ω—Ç–æ–≤</div>
          <div class="content"><table class="table" id="uniTableFull"></table></div></div>
      </div>

      <div id="seeker_skills" class="tabpage hidden">
        <div class="grid grid-2">
          <div class="card"><div class="title">–ö–∞—Ä—Ç–∞ –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–π 2025‚Äì2028</div>
            <div class="content" id="competencyMap"></div></div>
          <div class="card"><div class="title">–ú–æ–∏ —Å—Ç–∞—Ç—É—Å—ã –∑–∞–¥–∞—á</div>
            <div class="content"><div id="statusChart2" style="height:220px"></div></div></div>
        </div>
      </div>

      <div id="seeker_articles" class="tabpage hidden">
        <div class="grid grid-2" id="articlesGrid"></div>
      </div>
    </section>

    <!-- EMPLOYER -->
    <section id="employer" class="hidden fade-in">
      <div class="grid grid-2" style="align-items:center">
        <div class="grid" style="grid-template-columns:auto 1fr; gap:10px; align-items:center">
          <div class="badge" aria-hidden="true">üè∑Ô∏è</div>
          <div>
            <div style="font-weight:800" id="companyName">Jana Post ‚Äî –†–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—å</div>
            <div class="muted" style="font-size:12px">–û—Ä–≥-–∞–∫–∫–∞—É–Ω—Ç ¬∑ –±—é–¥–∂–µ—Ç –ø–∏–ª–æ—Ç–∞ 2.5 –º–ª–Ω ‚Ç∏</div>
          </div>
        </div>
        <div class="grid" style="grid-auto-flow:column; gap:8px; justify-content:end">
          <button class="btn primary" id="newTaskBtn">‚ûï –ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞</button>
          <button class="btn" id="openBranding">üñºÔ∏è –ë—Ä–µ–Ω–¥-—Å—Ç—Ä–∞–Ω–∏—Ü–∞</button>
        </div>
      </div>

      <div class="tabs" id="employerTabs" style="margin-top:8px"></div>

      <div id="employer_pipeline" class="tabpage">
        <div class="card"><div class="title">–ê–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏</div>
          <div class="content"><table class="table" id="pipelineTable"></table></div></div>
      </div>

      <div id="employer_candidates" class="tabpage hidden">
        <div id="candidatesGrid" class="grid grid-3"></div>
      </div>

      <div id="employer_pools" class="tabpage hidden">
        <div class="card"><div class="title">–ü—É–ª—ã –ø–æ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞–º</div>
          <div class="content"><table class="table" id="poolsTable"></table></div></div>
      </div>

      <div id="employer_employers" class="tabpage hidden">
        <div class="card"><div class="title">–†–µ–π—Ç–∏–Ω–≥ —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª–µ–π</div>
          <div class="content"><table class="table" id="employerRating"></table></div></div>
      </div>

      <div id="employer_reports" class="tabpage hidden">
        <div class="grid grid-2">
          <div class="card"><div class="title">–ß–∞—Å—ã –ø–æ –ø—Ä–æ–µ–∫—Ç–∞–º</div><div class="content"><div id="hoursChart2" style="height:220px"></div></div></div>
          <div class="card"><div class="title">–°—Ç–∞—Ç—É—Å—ã –∑–∞–¥–∞—á</div><div class="content"><div id="statusChart3" style="height:220px"></div></div></div>
        </div>
      </div>

      <div id="employer_articles" class="tabpage hidden">
        <div class="grid grid-2" id="articlesGrid2"></div>
      </div>
    </section>

    <!-- UNIVERSITY (NEW) -->
    <section id="university" class="hidden fade-in">
      <div class="grid grid-2" style="align-items:center">
        <div class="grid" style="grid-template-columns:auto 1fr; gap:10px; align-items:center">
          <div class="badge" aria-hidden="true">üéì</div>
          <div>
            <div style="font-weight:800" id="uniDashTitle">KBTU ‚Äî –¶–µ–Ω—Ç—Ä –∫–∞—Ä—å–µ—Ä—ã</div>
            <div class="muted" style="font-size:12px">–†–µ–∂–∏–º —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞ ¬∑ –∑–∞–≥—Ä—É–∑–∫–∞ –ø—É–ª–æ–≤ –≤—ã–ø—É—Å–∫–Ω–∏–∫–æ–≤</div>
          </div>
        </div>
        <div class="grid" style="grid-auto-flow:column; gap:8px; justify-content:end">
          <button class="btn primary" id="uploadPoolBtn">‚¨ÜÔ∏è –ó–∞–≥—Ä—É–∑–∏—Ç—å –ø—É–ª —Ç–∞–ª–∞–Ω—Ç–æ–≤</button>
          <button class="btn" id="switchUniBtn">üîÅ –°–º–µ–Ω–∏—Ç—å —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç</button>
        </div>
      </div>

      <div class="tabs" id="universityTabs" style="margin-top:8px"></div>

      <div id="university_overview" class="tabpage">
        <div class="grid grid-3">
          <div class="card"><div class="content"><div class="muted">–í—Å–µ–≥–æ —Ç–∞–ª–∞–Ω—Ç–æ–≤</div><div id="uniCount" style="font-weight:900;font-size:22px"></div></div></div>
          <div class="card"><div class="content"><div class="muted">–°—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥</div><div id="uniAvg" style="font-weight:900;font-size:22px"></div></div></div>
          <div class="card"><div class="content"><div class="muted">–ö–æ–º–ø–∞–Ω–∏–∏-—Ö–∞–±—ã</div><div id="uniHubs" style="font-weight:900;font-size:22px"></div></div></div>
        </div>
        <div class="card" style="margin-top:12px">
          <div class="title">–î–∏–Ω–∞–º–∏–∫–∞ —á–∞—Å–æ–≤ –ø–æ –º–µ—Å—è—Ü–∞–º</div>
          <div class="content"><div id="uniHoursChart" style="height:220px"></div></div>
        </div>
      </div>

      <div id="university_pools" class="tabpage hidden">
        <div class="card"><div class="title">–ü—É–ª –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤</div>
          <div class="content"><table class="table" id="uniPoolTable"></table></div>
        </div>
      </div>

      <div id="university_analytics" class="tabpage hidden">
        <div class="grid grid-2">
          <div class="card"><div class="title">–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–∏</div><div class="content"><div id="uniSkillsChart" style="height:220px"></div></div></div>
          <div class="card"><div class="title">–°—Ç–∞—Ç—É—Å—ã –∑–∞–¥–∞—á</div><div class="content"><div id="uniStatusChart" style="height:220px"></div></div></div>
        </div>
      </div>

      <div id="university_articles" class="tabpage hidden">
        <div class="grid grid-2" id="uniArticlesGrid"></div>
      </div>
    </section>
  </main>

  <div class="shell" style="padding:16px 0 40px 0;color:var(--muted);font-size:12px">¬© 2025 Talent Nomad ¬∑ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω ‚Üí –¶–ê ‚Üí –º–∏—Ä</div>

  <!-- MODALS -->
  <div class="modal-backdrop" id="taskModal">
    <div class="modal">
      <div class="hd" id="taskTitle">–ó–∞–¥–∞—á–∞</div>
      <div class="bd">
        <div class="chips" id="taskSkills"></div>
        <div id="taskMeta" style="margin-top:8px"></div>
        <div class="hr"></div>
        <div class="muted">–ö–æ—Ä–æ—Ç–∫–æ–µ –¢–ó: —ç—Ç–∞–ø–Ω–∞—è –ø—Ä–∏—ë–º–∫–∞, —ç—Å–∫—Ä–æ—É, –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç ‚Äî —è—Å–Ω–æ—Å—Ç—å –∏ —Å—Ä–æ–∫–∏.</div>
      </div>
      <div class="ft">
        <button class="btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        <button class="btn">–ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å</button>
        <button class="btn primary" id="respondBtn">–û—Ç–∫–ª–∏–∫–Ω—É—Ç—å—Å—è</button>
      </div>
    </div>
  </div>

  <div class="modal-backdrop" id="wizardModal">
    <div class="modal">
      <div class="hd">–ù–æ–≤–∞—è –º–∏–∫—Ä–æ‚Äë–∑–∞–¥–∞—á–∞</div>
      <div class="bd">
        <div class="grid grid-2">
          <input type="text" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ (–Ω–∞–ø—Ä. SMM: –∫–æ–Ω—Ç–µ–Ω—Ç‚Äë–∫–∞–ª–µ–Ω–¥–∞—Ä—å)" />
          <select><option>–¢–∏–ø –æ–ø–ª–∞—Ç—ã</option><option>–ü–æ—á–∞—Å–æ–≤–∞—è</option><option>–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è</option></select>
          <input type="text" placeholder="–°—Ç–∞–≤–∫–∞, ‚Ç∏/—á–∞—Å" />
          <input type="text" placeholder="–û—Ü–µ–Ω–∫–∞, —á" />
        </div>
        <input type="text" placeholder="–ö–ª—é—á–µ–≤—ã–µ –Ω–∞–≤—ã–∫–∏ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)" style="margin-top:8px" />
      </div>
      <div class="ft">
        <button class="btn" id="closeWizard">–û—Ç–º–µ–Ω–∞</button>
        <button class="btn primary" id="publishWizard">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å</button>
      </div>
    </div>
  </div>

  <div class="modal-backdrop" id="brandingModal">
    <div class="modal">
      <div class="hd">–ë—Ä–µ–Ω–¥–∏–Ω–≥ –∏ —Ç–µ–º–∞</div>
      <div class="bd">
        <div class="muted" style="margin-bottom:6px">–¶–≤–µ—Ç –∞–∫—Ü–µ–Ω—Ç–∞</div>
        <input type="color" id="accentPicker" value="#0a2b72" />
        <div style="height:12px"></div>
        <div class="muted">–†–µ–∂–∏–º —Ç–µ–º—ã</div>
        <div class="chips">
          <button class="chip" data-theme="night">–ù–æ—á–Ω–æ–π</button>
          <button class="chip" data-theme="bw">–ß—ë—Ä–Ω–æ‚Äë–±–µ–ª—ã–π</button>
        </div>
      </div>
      <div class="ft"><button class="btn" id="closeBranding">–ó–∞–∫—Ä—ã—Ç—å</button></div>
    </div>
  </div>

  <div class="modal-backdrop" id="companyModal">
    <div class="modal">
      <div class="hd" id="companyTitle">–ö–æ–º–ø–∞–Ω–∏—è</div>
      <div class="bd">
        <div class="grid grid-2">
          <div>
            <div class="muted">–ü—Ä–æ–µ–∫—Ç—ã</div>
            <div id="companyProjects"></div>
          </div>
          <div>
            <div class="muted">–û—Ü–µ–Ω–∫–∞ —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—è</div>
            <div id="companyRating" style="font-size:20px;font-weight:900">‚Äî</div>
            <div class="hr"></div>
            <div class="muted">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ—Ç–∑—ã–≤—ã (–¥–µ–º–æ)</div>
            <ul class="list"><li>–ß—ë—Ç–∫–æ–µ –¢–ó –∏ –±—ã—Å—Ç—Ä–∞—è –ø—Ä–∏—ë–º–∫–∞</li><li>–ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è</li></ul>
          </div>
        </div>
      </div>
      <div class="ft"><button class="btn" onclick="closeModals()">–ó–∞–∫—Ä—ã—Ç—å</button></div>
    </div>
  </div>

  <div class="modal-backdrop" id="uniModal">
    <div class="modal">
      <div class="hd" id="uniTitle">–£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç</div>
      <div class="bd">
        <div class="grid grid-2">
          <div>
            <div class="muted">–û–±–∑–æ—Ä</div>
            <div id="uniOverview"></div>
            <div class="hr"></div>
            <div class="muted">–ö–æ–º–ø–∞–Ω–∏–∏‚Äë—Ö–∞–±—ã</div>
            <div id="uniCompanies"></div>
          </div>
          <div>
            <div class="muted">–ü—É–ª —Ç–∞–ª–∞–Ω—Ç–æ–≤</div>
            <div id="uniTalent" style="max-height:260px;overflow:auto"></div>
          </div>
        </div>
      </div>
      <div class="ft"><button class="btn" onclick="closeModals()">–ó–∞–∫—Ä—ã—Ç—å</button></div>
    </div>
  </div>

  <div class="modal-backdrop" id="uploadModal">
    <div class="modal">
      <div class="hd">–ó–∞–≥—Ä—É–∑–∫–∞ –ø—É–ª–∞ —Ç–∞–ª–∞–Ω—Ç–æ–≤ (–¥–µ–º–æ)</div>
      <div class="bd">
        <div class="muted" style="margin-bottom:6px">–í—Å—Ç–∞–≤—å—Ç–µ —Å–ø–∏—Å–æ–∫: –ò–º—è;–†–æ–ª—å;–£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç;–†–µ–π—Ç–∏–Ω–≥</div>
        <textarea id="uploadText" rows="6" style="width:100%;background:transparent;border:1px solid var(--border);color:var(--fg);border-radius:12px;padding:10px"></textarea>
      </div>
      <div class="ft">
        <button class="btn" onclick="closeModals()">–û—Ç–º–µ–Ω–∞</button>
        <button class="btn primary" id="uploadConfirm">–î–æ–±–∞–≤–∏—Ç—å</button>
      </div>
    </div>
  </div>

  <div class="modal-backdrop" id="tourModal">
    <div class="modal">
      <div class="hd">–ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è Talent Nomad</div>
      <div class="bd">
        <div id="slides"></div>
        <div class="dots" id="dots"></div>
      </div>
      <div class="ft">
        <button class="btn" id="prevSlide">–ù–∞–∑–∞–¥</button>
        <button class="btn primary" id="nextSlide">–î–∞–ª–µ–µ</button>
      </div>
    </div>
  </div>

  <div class="toast" id="toast">–ì–æ—Ç–æ–≤–æ</div>

<script>
// ---------- Data ----------
const UNIVERSITIES = ["KBTU","AlmaU","Satbayev","ENU","KazGUU","SDU","KazNU","AITU"];
const COMPANIES = [
  {name:"Jana Post", rating:4.7, tagline:"–õ–æ–≥–∏—Å—Ç–∏–∫–∞ –∏ e‚Äëcommerce", projects:[
    {title:"–î–∞—à–±–æ—Ä–¥ –ø—Ä–æ–¥–∞–∂", skills:["BI/Looker","SQL","–ê–Ω–∞–ª–∏—Ç–∏–∫–∞"], rate:2900, hours:14, deadline:"10 –¥–Ω."},
    {title:"QA —á–µ–∫‚Äë–ª–∏—Å—Ç—ã", skills:["–ê–≤—Ç–æ‚Äë—Ç–µ—Å—Ç—ã","–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è","Postman"], rate:2200, hours:10, deadline:"7 –¥–Ω."},
    {title:"SMM –∫–æ–Ω—Ç–µ–Ω—Ç‚Äë–ø–ª–∞–Ω", skills:["UGC","Ads Manager","Copy"], rate:2100, hours:8, deadline:"6 –¥–Ω."},
  ]},
  {name:"MarketX", rating:4.8, tagline:"–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å", projects:[
    {title:"–õ–µ–Ω–¥–∏–Ω–≥ –ø—Ä–æ–¥—É–∫—Ç–∞", skills:["React/Next","UI/UX","Performance"], rate:3000, hours:16, deadline:"12 –¥–Ω."},
    {title:"–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ä–æ—Å—Ç–∞", skills:["A/B","–ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è","SQL"], rate:2800, hours:12, deadline:"9 –¥–Ω."},
  ]},
  {name:"Q‚ÄëLabs", rating:4.6, tagline:"–ü—Ä–æ–¥—É–∫—Ç–æ–≤–∞—è —Å—Ç—É–¥–∏—è", projects:[
    {title:"Flutter‚Äë–ø—Ä–æ—Ç–æ—Ç–∏–ø", skills:["Flutter","API/REST","Performance"], rate:3100, hours:18, deadline:"14 –¥–Ω."},
    {title:"CI/CD –Ω–∞—Å—Ç—Ä–æ–π–∫–∞", skills:["Docker","CI/CD","Cloud"], rate:3200, hours:14, deadline:"11 –¥–Ω."},
  ]},
  {name:"CaspianPay", rating:4.9, tagline:"–§–∏–Ω—Ç–µ—Ö", projects:[
    {title:"Onboarding UI", skills:["UI/UX","React","TypeScript"], rate:3300, hours:16, deadline:"10 –¥–Ω."},
    {title:"Security audit", skills:["Security","–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è"], rate:3400, hours:12, deadline:"9 –¥–Ω."},
  ]},
  {name:"EduBridge", rating:4.5, tagline:"EdTech", projects:[
    {title:"–í–∏–¥–µ–æ—É—Ä–æ–∫–∏ (SMM)", skills:["Short‚Äëvideo","UGC","Copy"], rate:2000, hours:8, deadline:"6 –¥–Ω."},
    {title:"–î–∞—à–±–æ—Ä–¥ –∫—É—Ä—Å–∞", skills:["BI/Looker","SQL","–ê–Ω–∞–ª–∏—Ç–∏–∫–∞"], rate:2600, hours:12, deadline:"9 –¥–Ω."},
  ]},
];
const SEEKERS = [
  {id:"U1", name:"–ê–ª–∏—è –ê.", role:"Frontend", uni:"KBTU", rating:4.8, cases:6, skills:["React/Next","TypeScript","API/REST"]},
  {id:"U2", name:"–ê—Ä–º–∞–Ω –ö.", role:"QA", uni:"ENU", rating:4.6, cases:4, skills:["–ê–≤—Ç–æ‚Äë—Ç–µ—Å—Ç—ã","Postman","–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è"]},
  {id:"U3", name:"–ú–∞—Ä–∂–∞–Ω –°.", role:"SMM", uni:"AlmaU", rating:4.7, cases:7, skills:["UGC","Short‚Äëvideo","Ads Manager"]},
  {id:"U4", name:"–ù—É—Ä–ª–∞–Ω –ñ.", role:"Data Analyst", uni:"KazNU", rating:4.5, cases:5, skills:["Python/SQL","BI/Looker","–ê–Ω–∞–ª–∏—Ç–∏–∫–∞"]},
  {id:"U5", name:"–î–∏–∞–Ω–∞ –¢.", role:"UI/UX", uni:"SDU", rating:4.9, cases:8, skills:["Figma","–ü—Ä–æ—Ç–æ—Ç–∏–ø–∏—Ä–æ–≤–∞–Ω–∏–µ","A/B"]},
  {id:"U6", name:"–ï—Ä–∂–∞–Ω –†.", role:"Mobile (Flutter)", uni:"AITU", rating:4.4, cases:3, skills:["Flutter","API/REST","Performance"]},
  {id:"U7", name:"–ê—Ä—É–∂–∞–Ω –ú.", role:"Product Analyst", uni:"KBTU", rating:4.6, cases:5, skills:["–ê–Ω–∞–ª–∏—Ç–∏–∫–∞","SQL","–ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è"]},
  {id:"U8", name:"–†—É—Å–ª–∞–Ω –î.", role:"Backend", uni:"Satbayev", rating:4.5, cases:4, skills:["Python/SQL","Security","Docker"]},
  {id:"U9", name:"–ê–π–≥–µ—Ä–∏–º –ù.", role:"Content Creator", uni:"AlmaU", rating:4.7, cases:6, skills:["Copy/Story","UGC","EN/KZ/RU"]},
  {id:"U10", name:"–°–∞–±–∏–Ω–∞ –ñ.", role:"DevOps (Jr)", uni:"ENU", rating:4.3, cases:3, skills:["CI/CD","Docker","Cloud"]},
];
const ARTICLES = [
  {title:"–ö–∞–∫ –ø—Ä–æ–π—Ç–∏ –ø–µ—Ä–≤–æ–µ –∏–Ω—Ç–µ—Ä–≤—å—é", tag:"–°–æ–∏—Å–∫–∞—Ç–µ–ª—é"},
  {title:"–ß–µ–∫‚Äë–ª–∏—Å—Ç –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ", tag:"–°–æ–∏—Å–∫–∞—Ç–µ–ª—é"},
  {title:"–≠—Å–∫—Ä–æ—É: –∫–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç", tag:"–§–∏–Ω–∞–Ω—Å—ã"},
  {title:"–°–º–∞—Ä—Ç‚Äë–∑–∞–¥–∞—á–∏ –¥–ª—è –¥–∂—É–Ω–∞", tag:"–†–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—é"},
];
const COMPETENCIES = [
  {cat:"AI & Data", skills:["AI‚Äë–ª–∏—Ç–µ—Ä–∞—Å–∏", "Python/SQL", "–ë–∞–∑–æ–≤—ã–π ML", "BI/Looker", "Prompt‚Äë–∏–Ω–∂–∏–Ω–∏—Ä–∏–Ω–≥"]},
  {cat:"Web & Mobile", skills:["React/Next", "Flutter", "TypeScript", "API/REST", "Performance"]},
  {cat:"Product & Growth", skills:["JTBD/UX‚Äë–∏—Å—Å–ª–µ–¥.", "–ê–Ω–∞–ª–∏—Ç–∏–∫–∞", "A/B", "–ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è", "Go‚Äëto‚ÄëMarket"]},
  {cat:"QA & Sec", skills:["–ê–≤—Ç–æ‚Äë—Ç–µ—Å—Ç—ã", "Postman", "CI/CD –æ—Å–Ω–æ–≤—ã", "Security basics", "–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è"]},
  {cat:"Content & SMM", skills:["UGC‚Äë–ø—Ä–æ–¥–∞–∫—à–Ω", "Copy/Story", "Short‚Äëvideo", "Ads Manager", "–ö–æ–º–º—å—é–Ω–∏—Ç–∏"]},
  {cat:"Ops & Cloud", skills:["Git/GitHub", "Docker basics", "Cloud basics", "Linux basics", "–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥"]},
  {cat:"Meta‚Äëskills", skills:["–ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è", "EN/KZ/RU", "Time‚ÄëMgmt", "–ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –º—ã—à–ª.", "–ö–æ–º–∞–Ω–¥–Ω–∞—è —Ä–∞–±–æ—Ç–∞"]},
];

// ---------- Helpers ----------
const $ = s => document.querySelector(s);
function show(el){el.classList.remove("hidden")}
function hide(el){el.classList.add("hidden")}
function setTheme(mode){ document.body.classList.toggle("theme-bw", mode === "bw"); }
function applyAccent(color){ document.documentElement.style.setProperty("--accent", color); $("#brandDot").style.background = color; }
function closeModals(){ document.querySelectorAll(".modal-backdrop").forEach(m=>m.classList.remove("show")); }
function openModal(id){ $(id).classList.add("show"); }
function toast(msg){ const t=$("#toast"); t.textContent=msg; t.style.display="block"; setTimeout(()=>t.style.display="none", 1600); }
function setActiveTab(scope, id){
  document.querySelectorAll(`[data-tabs='${scope}'] .tab`).forEach(n=>n.classList.remove("active"));
  const sel = document.querySelector(`[data-tabs='${scope}'] .tab[data-id='${id}']`);
  if(sel) sel.classList.add("active");
  document.querySelectorAll(`#${scope} .tabpage`).forEach(n=>hide(n));
  const page = $(`#${scope}_${id}`); if(page) show(page);
  window.scrollTo({top:0, behavior:"smooth"});
}
function createTabs(scope, tabs){
  const c = document.getElementById(scope+"Tabs"); c.setAttribute("data-tabs", scope); c.innerHTML="";
  tabs.forEach(t=>{
    const b=document.createElement("button"); b.className="tab"; b.dataset.id=t.id; b.textContent=t.label;
    b.addEventListener("click", ()=>setActiveTab(scope, t.id)); c.appendChild(b);
  });
  setActiveTab(scope, tabs[0].id);
}
function drawBars(el, data, valueKey, labelKey){
  if(!el) return;
  const w = el.clientWidth || 320, h = el.clientHeight || 180;
  const pad = 20, gap = 16, bw = Math.max(24, (w - pad*2 - gap*(data.length-1)) / data.length);
  const vmax = Math.max(...data.map(d=>d[valueKey])) || 1;
  const scale = v => Math.round((v / vmax) * (h - pad*2));
  let svg = `<svg width="${w}" height="${h}" xmlns="http://www.w3.org/2000/svg">`;
  svg += `<rect width="${w}" height="${h}" fill="transparent"/>`;
  data.forEach((d,i)=>{
    const x = pad + i*(bw+gap);
    const bh = scale(d[valueKey]); const y = h - pad - bh;
    svg += `<rect x="${x}" y="${y}" width="${bw}" height="${bh}" rx="6" fill="var(--accent)"></rect>`; /* FIX: stray ')' removed */
    svg += `<text x="${x+bw/2}" y="${h-5}" text-anchor="middle" fill="var(--muted)" font-size="11">${d[labelKey]}</text>`;
  });
  svg += `</svg>`; el.innerHTML = svg;
}

// ---------- Landing ----------
function populateLanding(){
  // universities small
  const t = $("#uniTableSmall"); t.innerHTML = "<thead><tr><th>–í—É–∑</th><th>–°–∫–æ—Ä</th></tr></thead><tbody></tbody>";
  const tb = t.querySelector("tbody");
  UNIVERSITIES.slice(0,6).forEach((u,i)=>{
    const score = 90 - i*3;
    const tr = document.createElement("tr");
    tr.innerHTML = `<td><a href="#" data-uni="${u}" class="link-btn">${u}</a></td>
      <td><div style="display:flex;align-items:center;gap:8px">
        <div style="height:6px;width:100px;background:#202938;border-radius:6px;overflow:hidden">
           <div style="height:6px;width:${score}%;background:var(--accent)"></div>
        </div><span>${score}</span></div></td>`;
    tr.querySelector("a").addEventListener("click",(e)=>{e.preventDefault(); openUniversityModal(u)});
    tb.appendChild(tr);
  });
  // employer rating small
  const et = $("#employerRatingSmall"); et.innerHTML = "<thead><tr><th>–ö–æ–º–ø–∞–Ω–∏—è</th><th>–†–µ–π—Ç–∏–Ω–≥</th></tr></thead><tbody></tbody>";
  const etb = et.querySelector("tbody");
  COMPANIES.forEach(c=>{
    const tr = document.createElement("tr");
    tr.innerHTML = `<td><a href="#" data-company="${c.name}">${c.name}</a></td><td>‚≠ê ${c.rating.toFixed(1)}</td>`;
    tr.querySelector("a").addEventListener("click",(e)=>{e.preventDefault(); openCompany(c.name)});
    etb.appendChild(tr);
  });
  // charts
  const kpiHours = [ {m:"–ú–∞–π",h:14},{m:"–ò—é–Ω",h:22},{m:"–ò—é–ª",h:35},{m:"–ê–≤–≥",h:46} ];
  const kpiTasks = [ {name:"–í —Ä–∞–±–æ—Ç–µ",v:28},{name:"–ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ",v:14},{name:"–ì–æ—Ç–æ–≤–æ",v:92} ];
  drawBars($("#hoursChart"), kpiHours, "h", "m");
  drawBars($("#statusChart"), kpiTasks, "v", "name");
}

// ---------- Seeker ----------
function populateSeeker(){
  createTabs("seeker", [
    {id:"feed", label:"üîé –õ–µ–Ω—Ç–∞ –∑–∞–¥–∞—á"},
    {id:"contracts", label:"üìë –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã"},
    {id:"portfolio", label:"‚≠ê –ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ"},
    {id:"universities", label:"üéì –£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç—ã"},
    {id:"skills", label:"üèÖ –ù–∞–≤—ã–∫–∏"},
    {id:"articles", label:"üìö –°—Ç–∞—Ç—å–∏"},
  ]);
  // tasks
  const grid = $("#tasksGrid"); grid.innerHTML="";
  const allTasks = COMPANIES.flatMap(c => c.projects.map(p => ({...p, company:c.name, level:"Junior+"})));
  allTasks.forEach(t=>{
    const card=document.createElement("div"); card.className="card";
    card.innerHTML = `<div class="title">${t.title}</div>
      <div class="content">
        <div class="chips">${t.skills.map(s=>`<span class="chip">${s}</span>`).join("")}</div>
        <div class="muted" style="margin-top:8px">–ö–æ–º–ø–∞–Ω–∏—è: ${t.company} ¬∑ –°—Ç–∞–≤–∫–∞: ${t.rate}‚Ç∏/—á–∞—Å ¬∑ –û—Ü–µ–Ω–∫–∞: ${t.hours} —á ¬∑ –î–µ–¥–ª–∞–π–Ω: ${t.deadline}</div>
        <div class="grid" style="grid-auto-flow:column; justify-content:space-between;margin-top:8px">
          <button class="btn primary">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
          <button class="btn">–û—Ç–∫–ª–∏–∫–Ω—É—Ç—å—Å—è</button>
        </div>
      </div>`;
    card.querySelector(".btn.primary").addEventListener("click", ()=>openTaskModal(t));
    grid.appendChild(card);
  });
  // portfolio
  const pg = $("#portfolioGrid"); pg.innerHTML="";
  ["–õ–µ–Ω–¥–∏–Ω–≥ —Å—Ç–∞—Ä—Ç–∞–ø–∞","–†–µ–¥–∏–∑–∞–π–Ω –¥–∞—à–±–æ—Ä–¥–∞","QA‚Äë—á–µ–∫‚Äë–ª–∏—Å—Ç—ã","–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ A/B","Flutter MVP","SMM‚Äë–∫–æ–Ω—Ç–µ–Ω—Ç"].forEach((name,i)=>{
    const c = document.createElement("div"); c.className="card";
    c.innerHTML = `<div class="content">
      <div style="font-weight:700">–ö–µ–π—Å #${i+1}: ${name}</div>
      <div class="muted">–†–æ–ª—å: —Ä–∞–∑–Ω–∞—è ¬∑ –ú–µ—Ç—Ä–∏–∫–∏: —Ä–æ—Å—Ç –∫–æ–Ω–≤–µ—Ä—Å–∏–∏, —Å–∫–æ—Ä–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏, –∫–∞—á–µ—Å—Ç–≤–æ</div>
      <div class="hr"></div>
      <button class="btn">–û—Ç–∫—Ä—ã—Ç—å –∫–µ–π—Å</button></div>`;
    pg.appendChild(c);
  });
  // universities table (with "–í–æ–π—Ç–∏ –∫–∞–∫ —Ü–µ–Ω—Ç—Ä –∫–∞—Ä—å–µ—Ä—ã")
  const ut = $("#uniTableFull"); ut.innerHTML="<thead><tr><th>#</th><th>–£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç</th><th>–ü—É–ª —Ç–∞–ª–∞–Ω—Ç–æ–≤</th><th>–°–∫–æ—Ä</th><th>–î–µ–π—Å—Ç–≤–∏–µ</th></tr></thead><tbody></tbody>";
  const utb = ut.querySelector("tbody");
  UNIVERSITIES.forEach((u,i)=>{
    const pool = SEEKERS.filter(s=>s.uni===u).length;
    const score = 92 - i*2;
    const tr = document.createElement("tr");
    tr.innerHTML = `<td>${i+1}</td><td>${u}</td><td>${pool}</td><td>${score}</td><td>
      <button class="btn" data-action="open">–û—Ç–∫—Ä—ã—Ç—å</button>
      <button class="btn" data-action="login">–í–æ–π—Ç–∏ –∫–∞–∫ —Ü–µ–Ω—Ç—Ä –∫–∞—Ä—å–µ—Ä—ã</button></td>`;
    tr.querySelector('[data-action="open"]').addEventListener("click", ()=>openUniversityModal(u));
    tr.querySelector('[data-action="login"]').addEventListener("click", ()=>switchUniversity(u));
    utb.appendChild(tr);
  });
  // skills map
  const cm = $("#competencyMap"); cm.innerHTML="";
  COMPETENCIES.forEach(c=>{
    const box=document.createElement("div"); box.style.marginBottom="10px";
    box.innerHTML = `<div style="font-weight:700">${c.cat}</div><div class="chips" style="margin-top:6px">${c.skills.map(s=>`<span class="chip">${s}</span>`).join("")}</div>`;
    cm.appendChild(box);
  });
  // articles
  const ag = $("#articlesGrid"); ag.innerHTML="";
  ARTICLES.forEach(t=>{
    const c = document.createElement("div"); c.className="card";
    c.innerHTML = `<div class="content"><div style="font-weight:700">${t.title}</div><div class="muted" style="margin-top:6px">${t.tag}</div>
                   <button class="btn" style="margin-top:8px">–ß–∏—Ç–∞—Ç—å</button></div>`;
    ag.appendChild(c);
  });
}

// ---------- Employer ----------
function populateEmployer(){
  createTabs("employer",[
    {id:"pipeline",label:"üìä –í–∞–∫–∞–Ω—Å–∏–∏/–∑–∞–¥–∞—á–∏"},
    {id:"candidates",label:"üë§ –ö–∞–Ω–¥–∏–¥–∞—Ç—ã (10)"},
    {id:"pools",label:"üéì –ü—É–ª—ã –ø–æ –≤—É–∑–∞–º"},
    {id:"employers",label:"üè¢ –†–µ–π—Ç–∏–Ω–≥ —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª–µ–π"},
    {id:"reports",label:"üìà –û—Ç—á—ë—Ç—ã"},
    {id:"articles",label:"üìö –°—Ç–∞—Ç—å–∏"},
  ]);
  // pipeline
  const pt = $("#pipelineTable");
  pt.innerHTML = "<thead><tr><th>–ó–∞–¥–∞—á–∞</th><th>–°—Ç–∞—Ç—É—Å</th><th>–û—Ç–∫–ª–∏–∫–æ–≤</th><th>–≠—Ç–∞–ø</th><th>–ö–æ–º–ø–∞–Ω–∏—è</th></tr></thead><tbody></tbody>";
  const ptb = pt.querySelector("tbody");
  COMPANIES.forEach(c => {
    c.projects.forEach((p,i)=>{
      const tr=document.createElement("tr");
      tr.innerHTML = `<td>${p.title}</td><td><span class="tag">${i%2? "–ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ":"–í —Ä–∞–±–æ—Ç–µ"}</span></td><td>${6+i*2}</td><td>${i%2? "UI 50%":"–ê–Ω–∞–ª–∏—Ç–∏–∫–∞"}</td><td><a href="#" data-company="${c.name}">${c.name}</a></td>`;
      tr.querySelector("a").addEventListener("click",(e)=>{e.preventDefault(); openCompany(c.name)});
      ptb.appendChild(tr);
    });
  });
  // candidates (10)
  const cg = $("#candidatesGrid"); cg.innerHTML="";
  SEEKERS.forEach(s=>{
    const card=document.createElement("div"); card.className="card";
    card.innerHTML = `<div class="content">
      <div class="grid" style="grid-template-columns:auto 1fr;gap:10px;align-items:center">
        <div class="badge">üßë‚Äçüíª</div>
        <div><div style="font-weight:700">${s.name}</div>
             <div class="muted" style="font-size:12px">${s.role} ¬∑ ${s.uni}</div></div>
      </div>
      <div class="chips" style="margin-top:8px">${s.skills.map(k=>`<span class="chip">${k}</span>`).join("")}</div>
      <div class="grid" style="grid-auto-flow:column;justify-content:space-between;margin-top:10px">
        <div>‚≠ê ${s.rating.toFixed(1)}</div>
        <button class="btn" onclick="openCandidate('${s.id}')">–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</button>
      </div></div>`;
    cg.appendChild(card);
  });
  // pools
  const ptbl = $("#poolsTable"); ptbl.innerHTML = "<thead><tr><th>–£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç</th><th>–í –ø—É–ª–µ</th><th>–°—Ä–µ–¥. —Ä–µ–π—Ç–∏–Ω–≥</th><th>–î–µ–π—Å—Ç–≤–∏–µ</th></tr></thead><tbody></tbody>";
  const ptbody = ptbl.querySelector("tbody");
  UNIVERSITIES.forEach(u=>{
    const pool = SEEKERS.filter(s=>s.uni===u);
    const avg = (pool.reduce((a,b)=>a+parseFloat(b.rating),0)/Math.max(pool.length,1) || 0).toFixed(1);
    const tr=document.createElement("tr");
    tr.innerHTML = `<td>${u}</td><td>${pool.length}</td><td>${avg}</td><td><button class="btn">–û—Ç–∫—Ä—ã—Ç—å –ø—É–ª</button></td>`;
    tr.querySelector("button").addEventListener("click",()=>openUniversityModal(u));
    ptbody.appendChild(tr);
  });
  // employer ratings
  const ert = $("#employerRating"); ert.innerHTML = "<thead><tr><th>#</th><th>–†–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—å</th><th>–†–µ–π—Ç–∏–Ω–≥</th><th>–ü—Ä–æ–µ–∫—Ç–æ–≤</th><th>–î–µ—Ç–∞–ª–∏</th></tr></thead><tbody></tbody>";
  const ertb = ert.querySelector("tbody");
  COMPANIES.slice().sort((a,b)=>b.rating-a.rating).forEach((c,i)=>{
    const tr=document.createElement("tr");
    tr.innerHTML = `<td>${i+1}</td><td>${c.name}</td><td>‚≠ê ${c.rating.toFixed(1)}</td><td>${c.projects.length}</td>
                    <td><button class="btn">–û—Ç–∫—Ä—ã—Ç—å</button></td>`;
    tr.querySelector("button").addEventListener("click",()=>openCompany(c.name));
    ertb.appendChild(tr);
  });
  // articles
  const ag = $("#articlesGrid2"); ag.innerHTML="";
  ["–ö–∞–∫ –ø–∏—Å–∞—Ç—å –∫—Ä–∞—Ç–∫–æ–µ –¢–ó","–ß–∞—Å—Ç–∏—á–Ω–∞—è –ø—Ä–∏—ë–º–∫–∞","–ì–∞–π–¥—ã –ø–æ —ç—Å–∫—Ä–æ—É","–ë—ã—Å—Ç—Ä—ã–π –Ω–∞–π–º –¥–∂—É–Ω–∞"].forEach(t=>{
    const c=document.createElement("div"); c.className="card";
    c.innerHTML = `<div class="content"><div style="font-weight:700">${t}</div><div class="muted" style="margin-top:6px">–ö–µ–π—Å‚Äë–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–≤–µ—Ç—ã.</div>
                   <button class="btn" style="margin-top:8px">–ß–∏—Ç–∞—Ç—å</button></div>`;
    ag.appendChild(c);
  });
  // charts
  const kpiHours = [ {m:"–ú–∞–π",h:14},{m:"–ò—é–Ω",h:22},{m:"–ò—é–ª",h:35},{m:"–ê–≤–≥",h:46} ];
  const kpiTasks = [ {name:"–í —Ä–∞–±–æ—Ç–µ",v:28},{name:"–ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ",v:14},{name:"–ì–æ—Ç–æ–≤–æ",v:92} ];
  drawBars($("#hoursChart2"), kpiHours, "h", "m");
  drawBars($("#statusChart3"), kpiTasks, "v", "name");
}

// ---------- University Dashboard ----------
let currentUniversity = "KBTU";
function populateUniversity(){
  createTabs("university",[
    {id:"overview",label:"üìä –û–±–∑–æ—Ä"},
    {id:"pools",label:"üéì –ü—É–ª—ã —Ç–∞–ª–∞–Ω—Ç–æ–≤"},
    {id:"analytics",label:"üìà –ê–Ω–∞–ª–∏—Ç–∏–∫–∞"},
    {id:"articles",label:"üìö –°—Ç–∞—Ç—å–∏"},
  ]);
  $("#uniDashTitle").textContent = currentUniversity + " ‚Äî –¶–µ–Ω—Ç—Ä –∫–∞—Ä—å–µ—Ä—ã";
  // overview cards
  const pool = SEEKERS.filter(s=>s.uni===currentUniversity);
  const avg = (pool.reduce((a,b)=>a+parseFloat(b.rating),0)/Math.max(pool.length,1)||0).toFixed(1);
  $("#uniCount").textContent = pool.length;
  $("#uniAvg").textContent = avg;
  $("#uniHubs").textContent = "3";
  drawBars($("#uniHoursChart"), [{m:"–ú–∞–π",h:12},{m:"–ò—é–Ω",h:18},{m:"–ò—é–ª",h:26},{m:"–ê–≤–≥",h:31}], "h", "m");
  // pools table
  const ut = $("#uniPoolTable"); ut.innerHTML = "<thead><tr><th>–ò–º—è</th><th>–†–æ–ª—å</th><th>–†–µ–π—Ç–∏–Ω–≥</th><th>–î–µ–π—Å—Ç–≤–∏–µ</th></tr></thead><tbody></tbody>";
  const utb = ut.querySelector("tbody");
  pool.forEach(s=>{
    const tr=document.createElement("tr");
    tr.innerHTML = `<td>${s.name}</td><td>${s.role}</td><td>‚≠ê ${s.rating.toFixed(1)}</td><td><button class="btn" onclick="openCandidate('${s.id}')">–û—Ç–∫—Ä—ã—Ç—å</button></td>`;
    utb.appendChild(tr);
  });
  // analytics
  drawBars($("#uniSkillsChart"), [{k:"Web",v:18},{k:"Data",v:12},{k:"QA",v:8},{k:"SMM",v:10}], "v", "k");
  drawBars($("#uniStatusChart"), [{k:"–í —Ä–∞–±–æ—Ç–µ",v:12},{k:"–ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ",v:6},{k:"–ì–æ—Ç–æ–≤–æ",v:22}], "v", "k");
  // articles
  const ag = $("#uniArticlesGrid"); ag.innerHTML="";
  ["–ö–∞–∫ –≥–æ—Ç–æ–≤–∏—Ç—å –ø—É–ª –≤—ã–ø—É—Å–∫–Ω–∏–∫–æ–≤","–®–∞–±–ª–æ–Ω—ã —Ä–µ–∑—é–º–µ","–°–æ–≥–ª–∞—à–µ–Ω–∏–µ –æ–± —ç—Å–∫—Ä–æ—É"].forEach(t=>{
    const c=document.createElement("div"); c.className="card";
    c.innerHTML = `<div class="content"><div style="font-weight:700">${t}</div><div class="muted" style="margin-top:6px">–ú–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–ª—è —Ü–µ–Ω—Ç—Ä–æ–≤ –∫–∞—Ä—å–µ—Ä—ã</div></div>`;
    ag.appendChild(c);
  });
}

// ---------- Drill-down (modals) ----------
function openTaskModal(t){
  $("#taskTitle").textContent = t.title;
  $("#taskSkills").innerHTML = t.skills.map(s=>`<span class="chip">${s}</span>`).join("");
  $("#taskMeta").textContent = `–ö–æ–º–ø–∞–Ω–∏—è: ${t.company} ¬∑ –°—Ç–∞–≤–∫–∞: ${t.rate}‚Ç∏/—á–∞—Å ¬∑ –û—Ü–µ–Ω–∫–∞: ${t.hours} —á ¬∑ –î–µ–¥–ª–∞–π–Ω: ${t.deadline}`;
  openModal("#taskModal");
}
function openCompany(name){
  const c = COMPANIES.find(x=>x.name===name); if(!c) return;
  $("#companyTitle").textContent = `${name} ‚Äî ${c.tagline}`;
  $("#companyRating").textContent = "‚≠ê " + c.rating.toFixed(1);
  const list = document.createElement("div");
  c.projects.forEach(p=>{
    const row = document.createElement("div"); row.style.margin="8px 0"; row.className="card";
    row.innerHTML = `<div class="content"><div style="font-weight:700">${p.title}</div>
                     <div class="chips" style="margin-top:6px">${p.skills.map(s=>`<span class="chip">${s}</span>`).join("")}</div>
                     <div class="muted" style="margin-top:4px">–°—Ç–∞–≤–∫–∞: ${p.rate}‚Ç∏/—á–∞—Å ¬∑ –û—Ü–µ–Ω–∫–∞: ${p.hours} —á ¬∑ –î–µ–¥–ª–∞–π–Ω: ${p.deadline}</div>
                     <button class="btn" style="margin-top:6px">–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–æ–µ–∫—Ç</button></div>`;
    list.appendChild(row);
  });
  const wrap = $("#companyProjects"); wrap.innerHTML=""; wrap.appendChild(list);
  openModal("#companyModal");
}
function openUniversityModal(uni){
  $("#uniTitle").textContent = uni;
  const pool = SEEKERS.filter(s=>s.uni===uni);
  const avg = (pool.reduce((a,b)=>a+parseFloat(b.rating),0)/Math.max(pool.length,1) || 0).toFixed(1);
  $("#uniOverview").innerHTML = `<div><strong>–¢–∞–ª–∞–Ω—Ç–æ–≤ –≤ –ø—É–ª–µ:</strong> ${pool.length}</div>
                                 <div><strong>–°—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥:</strong> ${avg}</div>`;
  const cc = $("#uniCompanies"); cc.innerHTML="";
  COMPANIES.slice().sort((a,b)=>b.rating-a.rating).slice(0,3).forEach(c=>{
    const row = document.createElement("div"); row.className="grid"; row.style.gridTemplateColumns="auto 1fr"; row.style.gap="8px";
    row.style.margin="6px 0";
    row.innerHTML = `<div class="badge">üè¢</div><div>${c.name} ‚Äî <span class="muted">${c.tagline}</span></div>`;
    cc.appendChild(row);
  });
  const tl = $("#uniTalent"); tl.innerHTML="";
  pool.forEach(s=>{
    const row = document.createElement("div"); row.className="grid"; row.style.gridTemplateColumns="1fr auto"; row.style.gap="8px";
    row.style.margin="4px 0";
    row.innerHTML = `<div>${s.name} ‚Äî <span class="muted">${s.role}</span></div><div>‚≠ê ${s.rating.toFixed(1)}</div>`;
    tl.appendChild(row);
  });
  openModal("#uniModal");
}

// ---------- Branding / Theme ----------
function initBranding(){
  $("#brandingBtn").addEventListener("click", ()=>openModal("#brandingModal"));
  $("#openBranding").addEventListener("click", ()=>openModal("#brandingModal"));
  $("#closeBranding").addEventListener("click", closeModals);
  $("#accentPicker").addEventListener("input", e=>applyAccent(e.target.value));
  document.querySelectorAll("#brandingModal .chip").forEach(b=>{
    b.addEventListener("click", ()=>{ setTheme(b.dataset.theme); closeModals(); });
  });
}

// ---------- Presentation (Tour) ----------
const TOUR_STEPS = [
  {title:"–õ—ç–Ω–¥–∏–Ω–≥", action:()=>{switchRole("guest");}},
  {title:"–°–æ–∏—Å–∫–∞—Ç–µ–ª—å ‚Äî –õ–µ–Ω—Ç–∞ –∑–∞–¥–∞—á", action:()=>{switchRole("seeker"); setActiveTab("seeker","feed");}},
  {title:"–ö–∞—Ä—Ç–æ—á–∫–∞ –∑–∞–¥–∞—á–∏", action:()=>{const t={...COMPANIES[0].projects[0], company:COMPANIES[0].name}; openTaskModal(t);}},
  {title:"–°–æ–∏—Å–∫–∞—Ç–µ–ª—å ‚Äî –£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç—ã", action:()=>{closeModals(); setActiveTab("seeker","universities");}},
  {title:"–†–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—å ‚Äî –ü–∞–π–ø–ª–∞–π–Ω", action:()=>{switchRole("employer"); setActiveTab("employer","pipeline");}},
  {title:"–†–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—å ‚Äî –ö–∞–Ω–¥–∏–¥–∞—Ç—ã (10)", action:()=>{setActiveTab("employer","candidates");}},
  {title:"–£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç ‚Äî –û–±–∑–æ—Ä", action:()=>{switchUniversity("KBTU");}},
];
let tourIndex = 0;
function openTour(){
  const slides = $("#slides"); const dots = $("#dots");
  slides.innerHTML = ""; dots.innerHTML = "";
  TOUR_STEPS.forEach((s,i)=>{
    const sl = document.createElement("div"); sl.className="slide"; sl.innerHTML = `<div><strong>${i+1}. ${s.title}</strong><div class="muted">–ù–∞–∂–º–∏—Ç–µ ¬´–î–∞–ª–µ–µ¬ª, —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–π —Å—Ü–µ–Ω–µ.</div></div>`;
    slides.appendChild(sl);
    const dot = document.createElement("div"); dot.className="dot"; dots.appendChild(dot);
  });
  tourIndex = 0; setSlide(0); openModal("#tourModal");
  TOUR_STEPS[0].action();
}
function setSlide(i){
  document.querySelectorAll("#slides .slide").forEach((el,idx)=>el.classList.toggle("active", idx===i));
  document.querySelectorAll("#dots .dot").forEach((el,idx)=>el.classList.toggle("active", idx===i));
}
function nextSlide(){ tourIndex = Math.min(TOUR_STEPS.length-1, tourIndex+1); setSlide(tourIndex); TOUR_STEPS[tourIndex].action(); }
function prevSlide(){ tourIndex = Math.max(0, tourIndex-1); setSlide(tourIndex); TOUR_STEPS[tourIndex].action(); }

// ---------- Role switching ----------
function switchRole(role){
  ["landing","seeker","employer","university"].forEach(id=>hide(document.getElementById(id)));
  if(role==="seeker"){ show($("#seeker")); }
  else if(role==="employer"){ show($("#employer")); }
  else if(role==="university"){ show($("#university")); }
  else { show($("#landing")); }
  window.scrollTo({top:0, behavior:"smooth"});
}
// helper to switch and set current university
function switchUniversity(u){
  currentUniversity = u;
  switchRole("university");
  populateUniversity();
  toast("–†–µ–∂–∏–º: " + u + " ‚Äî —Ü–µ–Ω—Ç—Ä –∫–∞—Ä—å–µ—Ä—ã");
}

// ---------- Upload (demo) ----------
function initUpload(){
  $("#uploadPoolBtn").addEventListener("click", ()=>openModal("#uploadModal"));
  $("#uploadConfirm").addEventListener("click", ()=>{
    const t = $("#uploadText").value.trim();
    if(!t){ toast("–ü—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫"); return; }
    const rows = t.split("\n").map(l=>l.split(";"));
    rows.forEach(r=>{
      if(r.length>=4){
        SEEKERS.push({id:"N"+Math.random().toString(36).slice(2,7), name:r[0], role:r[1], uni:r[2], rating:parseFloat(r[3])||4.5, cases:1, skills:["–ù–æ–≤–∏—á–æ–∫","–ì–æ—Ç–æ–≤ –∫ —Å—Ç–∞–∂."]});
      }
    });
    closeModals();
    populateUniversity();
    toast("–ü—É–ª –æ–±–Ω–æ–≤–ª—ë–Ω (–¥–µ–º–æ)");
  });
  $("#switchUniBtn").addEventListener("click", ()=>{
    const next = prompt("–í–≤–µ–¥–∏—Ç–µ –≤—É–∑ (KBTU, AlmaU, Satbayev, ENU, KazGUU, SDU, KazNU, AITU):", currentUniversity) || currentUniversity;
    switchUniversity(next);
  });
}

// ---------- Init ----------
function init(){
  populateLanding();
  populateSeeker();
  populateEmployer();
  initBranding();
  initUpload();

  document.querySelectorAll(".modal-backdrop").forEach(m=>m.addEventListener("click",e=>{ if(e.target===m) closeModals(); }));
  $("#enterSeeker").addEventListener("click", ()=>switchRole("seeker"));
  $("#enterEmployer").addEventListener("click", ()=>switchRole("employer"));
  $("#enterUniversity").addEventListener("click", ()=>switchUniversity("KBTU"));
  $("#logoutBtn").addEventListener("click", ()=>{switchRole("guest"); toast("–í—ã –≤—ã—à–ª–∏ –∏–∑ –∫–∞–±–∏–Ω–µ—Ç–∞");});
  $("#themeBtn").addEventListener("click", ()=>{
    const isBW = document.body.classList.toggle("theme-bw");
    applyAccent(isBW ? "#111111" : "#0a2b72");
  });
  $("#newTaskBtn").addEventListener("click", ()=>openModal("#wizardModal"));
  $("#closeWizard").addEventListener("click", closeModals);
  $("#publishWizard").addEventListener("click", ()=>{ closeModals(); toast("–ó–∞–¥–∞—á–∞ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–∞ (–¥–µ–º–æ)"); });
  $("#tourBtn").addEventListener("click", openTour);

  // Start at landing
  switchRole("guest");
}
window.addEventListener("DOMContentLoaded", init);
</script>
</body>
</html>
